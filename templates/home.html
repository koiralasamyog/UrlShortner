{% extends 'base.html' %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 75vh;">
    <div class="card p-4 text-center" style="max-width: 520px; width: 100%;">

        <h2 class="mb-2">ðŸ”— URLShortener</h2>
        <p class="text-muted small mb-4">
            Simple. Fast. Reliable URL shortening.
        </p>

        <form method="POST">
            {% csrf_token %}
            
            <!-- Long URL -->
            {{ form.original_url.label_tag }}
            {{ form.original_url }}
            
            <!-- Custom Short URL -->
            {{ form.custom_short_url.label_tag }}
            {{ form.custom_short_url }}
            
            <!-- Expiration Date -->
            {{ form.expiration_date.label_tag }}
            {{ form.expiration_date }}

            <button type="submit" class="btn btn-primary btn-block mt-2">
                Create Short URL
            </button>
        </form>

        {% if short_url %}
            <hr>
            <h6 class="text-success mt-3">ðŸŽ‰ Short URL Created</h6>
            <code class="d-block mb-2">
                {{ request.get_host }}/s/{{ short_url }}
            </code>
            <a href="s/{{ short_url }}" target="_blank" class="btn btn-outline-success btn-sm">
                Visit Link
            </a>
        {% endif %}
        
        {% if qr_code %}
            <div class="mt-3">
                <h6>ðŸ“± QR Code:</h6>
                <img src="{{ qr_code }}" alt="QR Code for short URL" class="img-fluid">
            </div>
        {% endif %}

        {% if form.errors %}
            <div class="alert alert-danger mt-3">
                {% for field in form %}
                    {% for error in field.errors %}
                        <div>{{ error }}</div>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <div>{{ error }}</div>
                {% endfor %}
            </div>
        {% endif %}

    </div>
</div>
{% endblock %}
